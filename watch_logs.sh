#!/bin/bash

echo "🔍 مانیتورینگ لاگ‌های سامانت..."
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# اگر فایل لاگ وجود نداشت، ایجادش کن
if [ ! -f "logs/app.log" ]; then
    touch logs/app.log
    echo "📝 فایل لاگ ایجاد شد"
fi

echo "⏰ شروع مانیتورینگ در $(date)"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

# نمایش آخرین 20 خط موجود
if [ -s "logs/app.log" ]; then
    echo "📋 آخرین لاگ‌ها:"
    tail -n 20 logs/app.log
    echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
fi

echo "👁️  در حال نظارت real-time... (Ctrl+C برای خروج)"

# شروع مانیتورینگ real-time
tail -f logs/app.log 