---
description: 
globs: 
alwaysApply: true
---
# ğŸš€ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø³Ø§Ù…Ø§Ù†Øª
## Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡ Ø¨Ø§ Cursor AI

**Ù†Ø³Ø®Ù‡:** 3.0  
**ØªØ§Ø±ÛŒØ®:** 1404/03/31  
**Ù‡Ø¯Ù:** ØªÙˆØ³Ø¹Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Cursor AI  
**ÙˆØ¶Ø¹ÛŒØª:** âœ… ÙØ§Ø² 2 ØªÚ©Ù…ÛŒÙ„ - Ø¢Ù…Ø§Ø¯Ù‡ ÙØ§Ø² 3+  

---

## ğŸ¯ **Ù…Ù‚Ø¯Ù…Ù‡ Ùˆ Ù‡Ø¯Ù**

Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù…ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ØŒ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø³Ø§Ù…Ø§Ù†Øª Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Cursor AI Ø§Ø³Øª. ØªÙ…Ø§Ù… ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† Ùˆ AI Assistants Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø§ÛŒÙ† Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ Ù¾ÛŒØ±ÙˆÛŒ Ú©Ù†Ù†Ø¯.

### **Ø§Ù‡Ø¯Ø§Ù Ø§ØµÙ„ÛŒ:**
1. **Ú©ÛŒÙÛŒØª Ú©Ø¯:** Ø­ÙØ¸ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ÛŒ Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ
2. **Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ:** Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø¨Ù‡ØªØ± Ø¨ÛŒÙ† ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† Ùˆ AI
3. **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ:** ØªÙˆØ³Ø¹Ù‡ Ù‚Ø§Ø¨Ù„ Ú¯Ø³ØªØ±Ø´ Ùˆ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ
4. **Ø¹Ù…Ù„Ú©Ø±Ø¯:** Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ø§ÙˆÙ… Ùˆ performance Ø¨Ø§Ù„Ø§
5. **Ø§Ù…Ù†ÛŒØª:** Ø±Ø¹Ø§ÛŒØª Ú©Ø§Ù…Ù„ Ø§ØµÙˆÙ„ Ø§Ù…Ù†ÛŒØªÛŒ

---

## ğŸ—ï¸ **Ù…Ø¹Ù…Ø§Ø±ÛŒ Ùˆ Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡**

### **Tech Stack Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯:**
```yaml
Backend:
  - PHP: 8.0+ (PSR-12, Clean Architecture)
  - Database: MySQL 8.0+ / MariaDB 10.5+
  - Web Server: Apache 2.4+ / Nginx 1.18+

Frontend:
  - HTML5: Semantic markup
  - CSS3: CSS Variables + Grid + Flexbox
  - JavaScript: ES6+ Vanilla (NO jQuery)
  - UI Framework: Bootstrap 5.3.0 RTL

Tools & Libraries:
  - Version Control: Git
  - Package Manager: Composer
  - Icons: FontAwesome 6.4.0
  - Charts: Chart.js (when needed)
  - Image Processing: Intervention Image
  - PDF Generation: TCPDF / mPDF
```

### **Ø³Ø§Ø®ØªØ§Ø± Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ (Ø§Ù„Ø²Ø§Ù…ÛŒ):**
```
samanat/
â”œâ”€â”€ ğŸ“ app/                    # Core Application
â”‚   â”œâ”€â”€ ğŸ“ controllers/        # MVC Controllers
â”‚   â”œâ”€â”€ ğŸ“ models/            # Database Models  
â”‚   â”œâ”€â”€ ğŸ“ views/             # UI Templates
â”‚   â”‚   â”œâ”€â”€ ğŸ“ layouts/       # Main layouts
â”‚   â”‚   â”œâ”€â”€ ğŸ“ requests/      # Request pages
â”‚   â”‚   â”œâ”€â”€ ğŸ“ documents/     # Document pages
â”‚   â”‚   â””â”€â”€ ğŸ“ reports/       # Report pages
â”‚   â”œâ”€â”€ ğŸ“ helpers/           # Utility Classes
â”‚   â”œâ”€â”€ ğŸ“ middleware/        # Request Middleware
â”‚   â””â”€â”€ ğŸ“ config/            # Configuration
â”œâ”€â”€ ğŸ“ assets/                # Static Assets
â”‚   â”œâ”€â”€ ğŸ“ css/              # Stylesheets
â”‚   â”œâ”€â”€ ğŸ“ js/               # JavaScript
â”‚   â”œâ”€â”€ ğŸ“ img/              # Images
â”‚   â””â”€â”€ ğŸ“ fonts/            # Fonts
â”œâ”€â”€ ğŸ“ api/                   # API Endpoints
â”œâ”€â”€ ğŸ“ upld/                  # User Uploads
â”œâ”€â”€ ğŸ“ vendor/                # Composer packages
â”œâ”€â”€ ğŸ“ logs/                  # Application logs
â”œâ”€â”€ ğŸ“ cache/                 # Cached files
â””â”€â”€ ğŸ“ pub/                   # Public forms
```

---

## ğŸ“‹ **Ù‚ÙˆØ§Ù†ÛŒÙ† Ú©Ø¯Ù†ÙˆÛŒØ³ÛŒ PHP**

### **1. Ø³Ø§Ø®ØªØ§Ø± ÙØ§ÛŒÙ„:**
```php
<?php
/**
 * Ù†Ø§Ù… ÙØ§ÛŒÙ„: RequestController.php
 * Ù…Ø³ÛŒØ±: /app/controllers/RequestController.php  
 * Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡: Cursor AI + Developer
 * ØªØ§Ø±ÛŒØ®: 1404/03/31
 * Ù‡Ø¯Ù: Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø­ÙˆØ§Ù„Ù‡
 * ÙØ§Ø²: 2 (ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡)
 */

declare(strict_types=1);

namespace App\Controllers;

use App\Models\PaymentRequest;
use App\Helpers\Security;
use App\Helpers\Validator;

/**
 * Ú©Ù†ØªØ±Ù„Ø± Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø­ÙˆØ§Ù„Ù‡
 */
class RequestController extends BaseController
{
    private PaymentRequest $requestModel;
    
    public function __construct()
    {
        parent::__construct();
        $this->requestModel = new PaymentRequest();
    }
    
    // Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„Ø±...
}
```

### **2. Ù†Ø§Ù…Ú¯Ø°Ø§Ø±ÛŒ (Ø§Ù„Ø²Ø§Ù…ÛŒ):**
```php
// Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§: PascalCase
class RequestController {}
class PaymentRequest {}

// Ù…ØªØ¯Ù‡Ø§: camelCase
public function createRequest() {}
public function validateInput() {}

// Ù…ØªØºÛŒØ±Ù‡Ø§: snake_case
$user_id = 123;
$payment_requests = [];

// Ø«Ø§Ø¨Øªâ€ŒÙ‡Ø§: UPPER_SNAKE_CASE
const MAX_FILE_SIZE = 5242880; // 5MB
const ALLOWED_EXTENSIONS = ['jpg', 'png', 'pdf'];

// ÙØ§ÛŒÙ„â€ŒÙ‡Ø§: kebab-case
create-request.php
payment-list.php
```

### **3. Ú©Ø§Ù…Ù†Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ ÙØ§Ø±Ø³ÛŒ:**
```php
/**
 * Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø­ÙˆØ§Ù„Ù‡ Ø¨Ø§ ÙÛŒÙ„ØªØ±
 * 
 * @param int $group_id Ø´Ù†Ø§Ø³Ù‡ Ú¯Ø±ÙˆÙ‡
 * @param string $status ÙˆØ¶Ø¹ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª (pending|processing|completed|rejected)
 * @param array $filters ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
 * @return array Ù†ØªÛŒØ¬Ù‡ Ø´Ø§Ù…Ù„ data Ùˆ pagination
 * @throws \Exception Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
 */
public function getRequests(int $group_id, string $status = 'all', array $filters = []): array
{
    // Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ² Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±
    if (!$this->checkUserPermission('view_requests')) {
        throw new \Exception('Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§');
    }
    
    // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
    $group_id = Security::sanitizeInt($group_id);
    $status = Security::sanitizeString($status);
    
    // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³
    return $this->requestModel->getGroupRequests($group_id, $status, $filters);
}
```

### **4. Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ Ùˆ Exception:**
```php
// Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§
try {
    $result = $this->processPayment($request_id);
    return $this->success('Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', $result);
} catch (\InvalidArgumentException $e) {
    Logger::warning('Invalid payment request', ['request_id' => $request_id, 'error' => $e->getMessage()]);
    return $this->error('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
} catch (\Exception $e) {
    Logger::error('Payment processing failed', ['request_id' => $request_id, 'error' => $e->getMessage()]);
    return $this->error('Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù¾Ø±Ø¯Ø§Ø®Øª');
}
```

---

## ğŸ¨ **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Frontend**

### **1. HTML Ø³Ø§Ø®ØªØ§Ø±ÛŒ:**
```html
<!-- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² HTML5 Semantic -->
<main class="content-wrapper">
    <header class="page-header">
        <h1 class="page-title">Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Ø®Ø§Ù†Ù‡</a></li>
                <li class="breadcrumb-item active">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</li>
            </ol>
        </nav>
    </header>
    
    <section class="page-content">
        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
    </section>
</main>
```

### **2. CSS Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯:**
```css
/* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² CSS Variables */
:root {
    /* Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ */
    --primary-color: #667eea;
    --secondary-color: #f093fb;
    --success-color: #4facfe;
    --warning-color: #ffecd2;
    --danger-color: #ff6b6b;
    
    /* ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§ */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    
    /* ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ */
    --font-primary: 'Vazirmatn', sans-serif;
    --font-secondary: 'IRANSans', sans-serif;
    
    /* Glass Morphism */
    --glass-bg: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.2);
    --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    --glass-blur: blur(4px);
}

/* Dark Mode */
[data-theme="dark"] {
    --primary-color: #9f7aea;
    --glass-bg: rgba(0, 0, 0, 0.3);
    --glass-border: rgba(255, 255, 255, 0.1);
}

/* Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ */
.btn-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    border: none;
    border-radius: 12px;
    padding: var(--spacing-sm) var(--spacing-lg);
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}
```

### **3. JavaScript ES6+ Vanilla:**
```javascript
/**
 * Ú©Ù„Ø§Ø³ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§
 */
class RequestManager {
    constructor() {
        this.apiBase = '/api/requests';
        this.init();
    }
    
    /**
     * Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
     */
    init() {
        this.bindEvents();
        this.loadRequests();
    }
    
    /**
     * Ø§ØªØµØ§Ù„ event listener Ù‡Ø§
     */
    bindEvents() {
        // ÙØ±Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª
        const createForm = document.getElementById('create-request-form');
        if (createForm) {
            createForm.addEventListener('submit', this.handleCreateRequest.bind(this));
        }
        
        // ÙÛŒÙ„ØªØ±Ù‡Ø§
        const filterElements = document.querySelectorAll('.filter-control');
        filterElements.forEach(element => {
            element.addEventListener('change', this.handleFilterChange.bind(this));
        });
    }
    
    /**
     * Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯
     * @param {Event} event 
     */
    async handleCreateRequest(event) {
        event.preventDefault();
        
        try {
            const formData = new FormData(event.target);
            const response = await this.sendRequest('POST', this.apiBase, formData);
            
            if (response.success) {
                this.showSuccess('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯');
                this.loadRequests();
                this.resetForm(event.target);
            } else {
                this.showError(response.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª');
            }
        } catch (error) {
            console.error('Request creation failed:', error);
            this.showError('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±');
        }
    }
    
    /**
     * Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª AJAX
     * @param {string} method 
     * @param {string} url 
     * @param {FormData|Object} data 
     * @returns {Promise<Object>}
     */
    async sendRequest(method, url, data = null) {
        const options = {
            method,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRF-Token': document.querySelector('meta[name="csrf-token"]')?.content
            }
        };
        
        if (data && method !== 'GET') {
            if (data instanceof FormData) {
                options.body = data;
            } else {
                options.headers['Content-Type'] = 'application/json';
                options.body = JSON.stringify(data);
            }
        }
        
        const response = await fetch(url, options);
        return await response.json();
    }
}

// Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
document.addEventListener('DOMContentLoaded', () => {
    window.requestManager = new RequestManager();
});
```

### **4. Ù‚ÙˆØ§Ù†ÛŒÙ† Theme Management (Ø§Ù„Ø²Ø§Ù…ÛŒ):**
```javascript
/**
 * âŒ NEVER DO - Ø§Ø´ØªØ¨Ø§Ù‡Ø§Øª Ø±Ø§ÛŒØ¬ Ø¯Ø± Ù…Ø¯ÛŒØ±ÛŒØª ØªÙ…
 */

// âŒ NEVER create local toggleTheme functions
function toggleTheme() {
    // Ø§ÛŒÙ† Ú©Ø§Ø± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme); // âŒ Wrong localStorage key!
}

// âŒ NEVER use different localStorage keys
localStorage.setItem('theme', 'dark'); // âŒ Wrong!
localStorage.setItem('app_theme', 'dark'); // âŒ Wrong!
localStorage.setItem('user_theme', 'dark'); // âŒ Wrong!

// âŒ NEVER override theme-system.js
document.addEventListener('DOMContentLoaded', function() {
    // âŒ Don't add theme management here
    const savedTheme = localStorage.getItem('theme');
    document.documentElement.setAttribute('data-theme', savedTheme);
});

/**
 * âœ… CORRECT - Ø§Ø³ØªÙØ§Ø¯Ù‡ ØµØ­ÛŒØ­ Ø§Ø² Ø³ÛŒØ³ØªÙ… ØªÙ…
 */

// âœ… ALWAYS use the central theme system
// Theme system handled by theme-system.js - no local override needed

// âœ… ALWAYS use correct localStorage key
const theme = localStorage.getItem('samanat_theme'); // âœ… Correct!

// âœ… ALWAYS use global toggleTheme function
// <button onclick="toggleTheme()">Toggle Theme</button>

// âœ… ALWAYS trust theme-system.js for persistence
// No need to add theme management code in individual pages
```

### **5. Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ØªÙ…:**
```html
<!-- âœ… CORRECT Theme Button Structure -->
<button class="theme-toggle" onclick="toggleTheme()" title="ØªØºÛŒÛŒØ± ØªÙ…">
    <i class="fas fa-moon" id="theme-icon"></i>
</button>

<!-- âŒ WRONG - Don't add onclick handlers -->
<button class="theme-toggle" onclick="myCustomToggle()" title="ØªØºÛŒÛŒØ± ØªÙ…">
    <i class="fas fa-moon"></i>
</button>
```

### **6. Ù‚ÙˆØ§Ù†ÛŒÙ† localStorage:**
```javascript
/**
 * âœ… CORRECT localStorage Usage
 */
// Theme persistence
localStorage.getItem('samanat_theme')
localStorage.setItem('samanat_theme', 'dark')

// Theme statistics
localStorage.getItem('samanat_theme_stats')
localStorage.setItem('samanat_theme_stats', JSON.stringify(stats))

/**
 * âŒ WRONG localStorage Usage
 */
// Don't use these keys
localStorage.getItem('theme') // âŒ Wrong!
localStorage.getItem('samanet_theme') // âŒ Typo!
localStorage.getItem('app_theme') // âŒ Wrong!
```

---

## ğŸ”’ **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ**

### **1. Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:**
```php
/**
 * Ú©Ù„Ø§Ø³ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
 */
class Validator 
{
    /**
     * Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„
     */
    public static function validateMobile(string $mobile): array 
    {
        // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ
        $mobile = Security::convertPersianToEnglish($mobile);
        
        // Ø­Ø°Ù Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ ØºÛŒØ±Ø¶Ø±ÙˆØ±ÛŒ
        $mobile = preg_replace('/[^0-9]/', '', $mobile);
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø·ÙˆÙ„ Ùˆ Ø§Ù„Ú¯Ùˆ
        if (!preg_match('/^09[0-9]{9}$/', $mobile)) {
            return ['valid' => false, 'message' => 'Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'];
        }
        
        return ['valid' => true, 'value' => $mobile];
    }
    
    /**
     * Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ù…Ø¨Ù„Øº
     */
    public static function validateAmount(?string $amount): array 
    {
        if (empty($amount)) {
            return ['valid' => true, 'value' => null];
        }
        
        // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ùˆ Ø­Ø°Ù Ú©Ø§Ù…Ø§
        $amount = Security::convertPersianToEnglish($amount);
        $amount = str_replace(',', '', $amount);
        
        if (!is_numeric($amount) || $amount < 0) {
            return ['valid' => false, 'message' => 'Ù…Ø¨Ù„Øº Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª'];
        }
        
        return ['valid' => true, 'value' => (float)$amount];
    }
}
```

### **2. Ù…Ø­Ø§ÙØ¸Øª Ø§Ø² SQL Injection:**
```php
/**
 * Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Prepared Statements
 */
public function getRequestById(int $id): ?array 
{
    $query = "SELECT * FROM payment_requests WHERE id = ? AND deleted_at IS NULL";
    return $this->db->fetchOne($query, [$id]);
}

/**
 * Safe dynamic queries
 */
public function searchRequests(array $filters): array 
{
    $conditions = ['deleted_at IS NULL'];
    $params = [];
    
    if (!empty($filters['status'])) {
        $conditions[] = 'status = ?';
        $params[] = $filters['status'];
    }
    
    if (!empty($filters['group_id'])) {
        $conditions[] = 'group_id = ?';
        $params[] = (int)$filters['group_id'];
    }
    
    $query = "SELECT * FROM payment_requests WHERE " . implode(' AND ', $conditions);
    return $this->db->fetchAll($query, $params);
}
```

### **3. Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ø§Ù…Ù†:**
```php
/**
 * Ú©Ù„Ø§Ø³ Ø¢Ù¾Ù„ÙˆØ¯ Ø§Ù…Ù† ÙØ§ÛŒÙ„
 */
class SecureFileUpload 
{
    private const ALLOWED_TYPES = [
        'image/jpeg',
        'image/png', 
        'image/gif',
        'application/pdf'
    ];
    
    private const MAX_SIZE = 5 * 1024 * 1024; // 5MB
    
    public function uploadFile(array $file, string $category = 'documents'): array 
    {
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø³Ø§Ø³ÛŒ
        if (!isset($file['tmp_name']) || !is_uploaded_file($file['tmp_name'])) {
            return ['success' => false, 'message' => 'ÙØ§ÛŒÙ„ Ø¢Ù¾Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡'];
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ù†Ø¯Ø§Ø²Ù‡
        if ($file['size'] > self::MAX_SIZE) {
            return ['success' => false, 'message' => 'Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙØ§ÛŒÙ„ Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø²'];
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ù†ÙˆØ¹ ÙØ§ÛŒÙ„
        $mimeType = mime_content_type($file['tmp_name']);
        if (!in_array($mimeType, self::ALLOWED_TYPES)) {
            return ['success' => false, 'message' => 'Ù†ÙˆØ¹ ÙØ§ÛŒÙ„ Ù…Ø¬Ø§Ø² Ù†ÛŒØ³Øª'];
        }
        
        // ØªÙˆÙ„ÛŒØ¯ Ù†Ø§Ù… Ø§Ù…Ù†
        $extension = pathinfo($file['name'], PATHINFO_EXTENSION);
        $filename = hash('sha256', uniqid() . time()) . '.' . strtolower($extension);
        
        // Ù…Ø³ÛŒØ± Ø°Ø®ÛŒØ±Ù‡
        $uploadPath = "upld/{$category}/" . date('Y/m/');
        if (!is_dir($uploadPath)) {
            mkdir($uploadPath, 0755, true);
        }
        
        $fullPath = $uploadPath . $filename;
        
        // Ø§Ù†ØªÙ‚Ø§Ù„ ÙØ§ÛŒÙ„
        if (move_uploaded_file($file['tmp_name'], $fullPath)) {
            return [
                'success' => true,
                'filename' => $filename,
                'path' => $fullPath,
                'size' => $file['size'],
                'type' => $mimeType
            ];
        }
        
        return ['success' => false, 'message' => 'Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ ÙØ§ÛŒÙ„'];
    }
}
```

---

## ğŸ“± **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Responsive Design**

### **1. Mobile-First Approach:**
```css
/* Base styles (Ù…ÙˆØ¨Ø§ÛŒÙ„) */
.request-card {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-radius: 12px;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
}

/* ØªØ¨Ù„Øª */
@media (min-width: 768px) {
    .request-card {
        padding: var(--spacing-lg);
        margin-bottom: var(--spacing-lg);
    }
    
    .requests-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-lg);
    }
}

/* Ø¯Ø³Ú©ØªØ§Ù¾ */
@media (min-width: 1200px) {
    .requests-grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .sidebar {
        position: fixed;
        top: 80px;
        right: 0;
        width: 300px;
        height: calc(100vh - 80px);
    }
    
    .content-wrapper {
        margin-right: 320px;
    }
}
```

### **2. Touch-Friendly Components:**
```css
/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Touch-friendly */
.btn {
    min-height: 45px;
    min-width: 45px;
    padding: var(--spacing-sm) var(--spacing-lg);
    margin: var(--spacing-xs);
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
}

/* ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙØ±Ù… Ù…ÙˆØ¨Ø§ÛŒÙ„ */
.form-control {
    min-height: 48px;
    padding: var(--spacing-sm);
    border-radius: 8px;
    font-size: 16px; /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² zoom Ø¯Ø± iOS */
}

/* Navigation Ù…ÙˆØ¨Ø§ÛŒÙ„ */
.mobile-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 1000;
}

@media (min-width: 768px) {
    .mobile-nav {
        display: none;
    }
}
```

---

## ğŸš€ **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Performance**

### **1. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Database:**
```sql
-- Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ
CREATE INDEX idx_payment_requests_status ON payment_requests(status);
CREATE INDEX idx_payment_requests_group_id ON payment_requests(group_id);
CREATE INDEX idx_payment_requests_created_at ON payment_requests(created_at);
CREATE INDEX idx_payment_requests_compound ON payment_requests(group_id, status, created_at);

-- View Ø¨Ø±Ø§ÛŒ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡
CREATE VIEW v_request_statistics AS
SELECT 
    group_id,
    COUNT(*) as total_requests,
    SUM(CASE WHEN status = 'pending' THEN 1 ELSE 0 END) as pending_count,
    SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END) as completed_count,
    SUM(CASE WHEN status = 'completed' THEN amount ELSE 0 END) as completed_amount
FROM payment_requests 
WHERE deleted_at IS NULL
GROUP BY group_id;
```

### **2. Ú©Ø´ Ú©Ø±Ø¯Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯:**
```php
/**
 * Ú©Ù„Ø§Ø³ Ú©Ø´ Ø³Ø§Ø¯Ù‡
 */
class Cache 
{
    private static string $cacheDir = 'cache/';
    
    public static function get(string $key, int $ttl = 3600): mixed 
    {
        $file = self::$cacheDir . hash('md5', $key) . '.cache';
        
        if (!file_exists($file) || (time() - filemtime($file)) > $ttl) {
            return null;
        }
        
        return unserialize(file_get_contents($file));
    }
    
    public static function set(string $key, mixed $data): bool 
    {
        $file = self::$cacheDir . hash('md5', $key) . '.cache';
        
        if (!is_dir(self::$cacheDir)) {
            mkdir(self::$cacheDir, 0755, true);
        }
        
        return file_put_contents($file, serialize($data)) !== false;
    }
    
    public static function delete(string $key): bool 
    {
        $file = self::$cacheDir . hash('md5', $key) . '.cache';
        return file_exists($file) && unlink($file);
    }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Controller
public function getRequestStats(int $groupId): array 
{
    $cacheKey = "request_stats_{$groupId}";
    $stats = Cache::get($cacheKey, 300); // 5 Ø¯Ù‚ÛŒÙ‚Ù‡
    
    if ($stats === null) {
        $stats = $this->requestModel->calculateStats($groupId);
        Cache::set($cacheKey, $stats);
    }
    
    return $stats;
}
```

### **3. Lazy Loading Ùˆ Asset Optimization:**
```javascript
/**
 * Lazy Loading Ø¨Ø±Ø§ÛŒ ØªØµØ§ÙˆÛŒØ±
 */
class LazyImageLoader {
    constructor() {
        this.observer = new IntersectionObserver(this.handleIntersection.bind(this));
        this.init();
    }
    
    init() {
        const images = document.querySelectorAll('img[data-src]');
        images.forEach(img => this.observer.observe(img));
    }
    
    handleIntersection(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
                this.observer.unobserve(img);
            }
        });
    }
}

/**
 * Asset Loading Ù…Ø´Ø±ÙˆØ·
 */
class ConditionalAssetLoader {
    static async loadChart() {
        if (!window.Chart) {
            await this.loadScript('/assets/js/chart.min.js');
        }
        return window.Chart;
    }
    
    static loadScript(src) {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = src;
            script.onload = resolve;
            script.onerror = reject;
            document.head.appendChild(script);
        });
    }
}
```

---

## ğŸ“Š **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ API**

### **1. Response Format Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯:**
```php
/**
 * Ú©Ù„Ø§Ø³ Ù¾Ø§Ø³Ø® API Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯
 */
class ApiResponse 
{
    public static function success(mixed $data = null, string $message = 'Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆÙÙ‚', array $meta = []): array 
    {
        return [
            'success' => true,
            'message' => $message,
            'data' => $data,
            'meta' => array_merge([
                'timestamp' => date('Y-m-d H:i:s'),
                'version' => '2.0'
            ], $meta)
        ];
    }
    
    public static function error(string $message = 'Ø®Ø·Ø§ Ø¯Ø± Ø¹Ù…Ù„ÛŒØ§Øª', mixed $errors = null, int $code = 400): array 
    {
        return [
            'success' => false,
            'message' => $message,
            'errors' => $errors,
            'meta' => [
                'error_code' => $code,
                'timestamp' => date('Y-m-d H:i:s'),
                'version' => '2.0'
            ]
        ];
    }
    
    public static function paginated(array $data, int $page, int $perPage, int $total): array 
    {
        return self::success($data, 'Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯', [
            'pagination' => [
                'current_page' => $page,
                'per_page' => $perPage,
                'total' => $total,
                'total_pages' => ceil($total / $perPage),
                'has_more' => ($page * $perPage) < $total
            ]
        ]);
    }
}
```

### **2. API Endpoints Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯:**
```php
// Routes definition
$routes = [
    // Requests API
    'GET /api/requests' => 'RequestController@index',
    'POST /api/requests' => 'RequestController@store', 
    'GET /api/requests/{id}' => 'RequestController@show',
    'PUT /api/requests/{id}' => 'RequestController@update',
    'DELETE /api/requests/{id}' => 'RequestController@destroy',
    
    // Request Actions
    'POST /api/requests/{id}/approve' => 'RequestController@approve',
    'POST /api/requests/{id}/reject' => 'RequestController@reject',
    'POST /api/requests/{id}/complete' => 'RequestController@complete',
    
    // Documents API  
    'POST /api/requests/{id}/documents' => 'DocumentController@upload',
    'GET /api/requests/{id}/documents' => 'DocumentController@index',
    'DELETE /api/documents/{id}' => 'DocumentController@destroy',
    
    // Reports API
    'GET /api/reports/requests' => 'ReportController@requests',
    'GET /api/reports/statistics' => 'ReportController@statistics',
    'POST /api/reports/export' => 'ReportController@export'
];
```

---

## ğŸ§ª **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Testing**

### **1. Unit Testing:**
```php
use PHPUnit\Framework\TestCase;

/**
 * ØªØ³Øª Ú©Ù„Ø§Ø³ Validator
 */
class ValidatorTest extends TestCase 
{
    public function testValidateMobileWithValidNumber(): void 
    {
        $result = Validator::validateMobile('Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹');
        
        $this->assertTrue($result['valid']);
        $this->assertEquals('09123456789', $result['value']);
    }
    
    public function testValidateMobileWithInvalidNumber(): void 
    {
        $result = Validator::validateMobile('123456');
        
        $this->assertFalse($result['valid']);
        $this->assertArrayHasKey('message', $result);
    }
    
    public function testValidateAmountWithPersianNumbers(): void 
    {
        $result = Validator::validateAmount('Û±Û°Û°,Û°Û°Û°');
        
        $this->assertTrue($result['valid']);
        $this->assertEquals(100000.0, $result['value']);
    }
}
```

### **2. Integration Testing:**
```php
/**
 * ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ API
 */
class RequestApiTest extends TestCase 
{
    public function testCreateRequestWithValidData(): void 
    {
        $data = [
            'title' => 'ØªØ³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª',
            'amount' => '100000',
            'account_number' => '1234567890',
            'account_holder' => 'Ø¹Ù„ÛŒ Ø§Ø­Ù…Ø¯ÛŒ'
        ];
        
        $response = $this->post('/api/requests', $data);
        
        $response->assertStatus(201);
        $response->assertJsonStructure([
            'success',
            'message', 
            'data' => ['id', 'title', 'status'],
            'meta'
        ]);
    }
}
```

---

## ğŸ“š **Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ**

### **1. Ú©Ø§Ù…Ù†Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ø¯:**
```php
/**
 * Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ§ÛŒÛŒØ¯ Ø­ÙˆØ§Ù„Ù‡
 * 
 * Ø§ÛŒÙ† Ù…ØªØ¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø­ÙˆØ§Ù„Ù‡ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø¯Ø± ØµÙˆØ±Øª ØªØ§ÛŒÛŒØ¯ØŒ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
 * Ù‡Ù…Ú†Ù†ÛŒÙ† ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØºÛŒÛŒØ±Ø§Øª Ø±Ø§ Ø«Ø¨Øª Ùˆ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ù„Ø§Ø²Ù… Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
 * 
 * @param int $requestId Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª
 * @param string $comment Ù†Ø¸Ø± ØªØ§ÛŒÛŒØ¯ Ú©Ù†Ù†Ø¯Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
 * @param array $attachments ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ù…ÛŒÙ…Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
 * 
 * @return array Ù†ØªÛŒØ¬Ù‡ Ø¹Ù…Ù„ÛŒØ§Øª Ø´Ø§Ù…Ù„:
 *               - success: Ù…ÙˆÙÙ‚ÛŒØª Ø¹Ù…Ù„ÛŒØ§Øª
 *               - message: Ù¾ÛŒØ§Ù… Ù†ØªÛŒØ¬Ù‡
 *               - data: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡
 * 
 * @throws \InvalidArgumentException Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒØ§ÙØª Ù†Ø´Ø¯
 * @throws \Exception Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´
 * 
 * @since 2.0.0
 * @author Cursor AI + Developer Team
 */
public function approveRequest(int $requestId, string $comment = '', array $attachments = []): array 
{
    // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ØªØ¯...
}
```

### **2. Documentation Files:**
```markdown
# API Documentation Template

## Endpoint: POST /api/requests

### ØªÙˆØ¶ÛŒØ­
Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø­ÙˆØ§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯

### Headers
```
Content-Type: application/json
Authorization: Bearer {token}
X-CSRF-Token: {csrf_token}
```

### Request Body
```json
{
    "title": "Ø¹Ù†ÙˆØ§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª",
    "description": "ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ", 
    "amount": 1000000,
    "account_number": "1234567890",
    "account_holder": "Ù†Ø§Ù… ØµØ§Ø­Ø¨ Ø­Ø³Ø§Ø¨",
    "bank_name": "Ù†Ø§Ù… Ø¨Ø§Ù†Ú©",
    "priority": "normal"
}
```

### Response
```json
{
    "success": true,
    "message": "Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯",
    "data": {
        "id": 123,
        "title": "Ø¹Ù†ÙˆØ§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª",
        "status": "pending",
        "created_at": "1404-03-31 10:30:00"
    }
}
```

### Error Codes
- 400: Bad Request - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±
- 401: Unauthorized - Ø¹Ø¯Ù… Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
- 403: Forbidden - Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ
- 422: Validation Error - Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
```

---

## ğŸ”§ **Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ùˆ DevOps**

### **1. Git Workflow:**
```bash
# Branch Naming
feature/phase-3-document-management
bugfix/fix-mobile-responsive
hotfix/security-patch-auth

# Commit Message Format
feat(requests): add real-time status updates
fix(mobile): resolve sidebar overlay issue  
docs(api): update endpoint documentation
perf(database): optimize request queries

# Pre-commit hooks
composer install
php vendor/bin/phpstan analyse
php vendor/bin/php-cs-fixer fix
npm run build
```

### **2. Environment Configuration:**
```php
// config/environment.php
return [
    'development' => [
        'database' => [
            'host' => 'localhost',
            'name' => 'samanet_dev',
            'user' => 'root',
            'pass' => '123'
        ],
        'debug' => true,
        'cache' => false,
        'log_level' => 'debug'
    ],
    
    'production' => [
        'database' => [
            'host' => getenv('DB_HOST'),
            'name' => getenv('DB_NAME'), 
            'user' => getenv('DB_USER'),
            'pass' => getenv('DB_PASS')
        ],
        'debug' => false,
        'cache' => true,
        'log_level' => 'error'
    ]
];
```

### **3. Deployment Checklist:**
```yaml
Pre-Deployment:
  - [ ] Run all tests
  - [ ] Update version number
  - [ ] Generate documentation
  - [ ] Optimize assets
  - [ ] Database migrations
  - [ ] Security scan

Deployment:
  - [ ] Backup current version
  - [ ] Deploy new code
  - [ ] Run database migrations
  - [ ] Clear caches
  - [ ] Update configurations
  - [ ] Restart services

Post-Deployment:
  - [ ] Verify functionality
  - [ ] Check error logs  
  - [ ] Monitor performance
  - [ ] Update documentation
  - [ ] Notify stakeholders
```

---

## ğŸ¯ **Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ÙØ§Ø²Ù‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡**

### **ÙØ§Ø² 3: Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³Ù†Ø§Ø¯ (Ø¯Ø± Ø­Ø§Ù„ Ø´Ø±ÙˆØ¹)**
```php
// Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø¯Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²

/**
 * Ú©Ù†ØªØ±Ù„Ø± Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³Ù†Ø§Ø¯
 */
class DocumentController extends BaseController 
{
    /**
     * Ø¢Ù¾Ù„ÙˆØ¯ Ú†Ù†Ø¯Ú¯Ø§Ù†Ù‡ ÙØ§ÛŒÙ„ Ø¨Ø§ drag & drop
     */
    public function multipleUpload(int $requestId): array 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ Ú†Ù†Ø¯Ú¯Ø§Ù†Ù‡
    }
    
    /**
     * Ø§Ø¹Ù…Ø§Ù„ ÙˆØ§ØªØ±Ù…Ø§Ø±Ú© Ø®ÙˆØ¯Ú©Ø§Ø±
     */
    public function applyWatermark(string $imagePath): string 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§ØªØ±Ù…Ø§Ø±Ú©
    }
    
    /**
     * Ø§ÛŒØ¬Ø§Ø¯ thumbnail
     */
    public function generateThumbnail(string $imagePath): string 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ thumbnail
    }
}
```

### **ÙØ§Ø² 4: Ø³ÛŒØ³ØªÙ… ØªØ§ÛŒÛŒØ¯**
```php
/**
 * Ú©Ù„Ø§Ø³ Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø±
 */
class WorkflowEngine 
{
    /**
     * ØªØ¹Ø±ÛŒÙ Ù…Ø±Ø§Ø­Ù„ ØªØ§ÛŒÛŒØ¯
     */
    public function defineWorkflow(string $type): array 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ workflow
    }
    
    /**
     * Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ
     */
    public function nextStep(int $requestId): array 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ next step
    }
}
```

### **ÙØ§Ø² 5: Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ú¯Ø²Ø§Ø±Ø´**
```php
/**
 * Ù…ÙˆØªÙˆØ± Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
 */
class SearchEngine 
{
    /**
     * Ø¬Ø³ØªØ¬ÙˆÛŒ ÙÙˆÙ„â€ŒØªÚ©Ø³Øª
     */
    public function fullTextSearch(string $query, array $filters = []): array 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø³ØªØ¬Ùˆ
    }
    
    /**
     * ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´
     */
    public function generateReport(string $type, array $params): array 
    {
        // Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú¯Ø²Ø§Ø±Ø´
    }
}
```

---

## âœ… **Ú†Ú©â€ŒÙ„ÛŒØ³Øª Quality Assurance**

### **Ú©ÛŒÙÛŒØª Ú©Ø¯:**
- [ ] PSR-12 compliance
- [ ] PHPStan level 8
- [ ] Unit test coverage > 80%
- [ ] No security vulnerabilities
- [ ] Performance benchmarks met

### **UI/UX:**
- [ ] Mobile responsive (< 575px)
- [ ] Touch-friendly (45px+ buttons)
- [ ] Accessibility (WCAG 2.1)
- [ ] Persian language support
- [ ] Theme system working

### **Performance:**
- [ ] Page load < 2 seconds
- [ ] Database queries optimized
- [ ] Assets minified and compressed
- [ ] Caching implemented
- [ ] Image optimization

### **Security:**
- [ ] Input validation everywhere
- [ ] SQL injection protected
- [ ] XSS prevention
- [ ] CSRF tokens
- [ ] File upload security

### **Documentation:**
- [ ] API endpoints documented
- [ ] Code comments in Persian
- [ ] User manual updated
- [ ] Deployment guide
- [ ] Troubleshooting guide

---

## ğŸš€ **Ø®Ù„Ø§ØµÙ‡ Ùˆ Ù†Ú©Ø§Øª Ù¾Ø§ÛŒØ§Ù†ÛŒ**

### **Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:**
1. **Ø§Ù…Ù†ÛŒØª Ø§ÙˆÙ„** - Ù‡ÛŒÚ†â€ŒÚ¯Ø§Ù‡ Ø§Ù…Ù†ÛŒØª Ø±Ø§ ÙØ¯Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù†Ú©Ù†ÛŒØ¯
2. **Ú©ÛŒÙÛŒØª Ú©Ø¯** - Ù‡Ù…ÛŒØ´Ù‡ clean, readable, maintainable
3. **User Experience** - ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø± Ø§ÙˆÙ„ÙˆÛŒØª
4. **Performance** - Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ø§ÙˆÙ… Ø¶Ø±ÙˆØ±ÛŒ
5. **Documentation** - Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Ø¨Ø§ ØªÙˆØ³Ø¹Ù‡

### **Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Cursor AI:**
- Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ Ù¾ÛŒØ±ÙˆÛŒ Ú©Ù†ÛŒØ¯
- Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ Ø¨Ø§Ø´Ù†Ø¯
- Security Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯
- Performance Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ù†Ú©Ù†ÛŒØ¯
- Mobile-first approach Ø±Ø§ Ø±Ø¹Ø§ÛŒØª Ú©Ù†ÛŒØ¯

### **Ù…Ù†Ø§Ø¨Ø¹ Ùˆ Ù…Ø±Ø§Ø¬Ø¹:**
- **PSR-12:** https://www.php-fig.org/psr/psr-12/
- **Bootstrap RTL:** https://getbootstrap.com/
- **Security Guide:** OWASP Top 10
- **Performance:** Web Vitals

---
**ğŸ“ Ù†Ø³Ø®Ù‡:** 3.0  
**ğŸ“… Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:** 1404/03/31  
**âœ… ÙˆØ¶Ø¹ÛŒØª:** ÙØ¹Ø§Ù„ Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡  
**ğŸ¯ Ù‡Ø¯Ù:** ØªÙˆØ³Ø¹Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø³Ø§Ù…Ø§Ù†Øª Ø¨Ø§ Cursor AI
