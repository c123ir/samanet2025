---
description: 
globs: 
alwaysApply: false
---
# ğŸ› Ù‚ÙˆØ§Ù†ÛŒÙ† Ø®Ø·Ø§ÛŒØ§Ø¨ÛŒ Ùˆ Ø±ÙØ¹ Ù…Ø´Ú©Ù„Ø§Øª Ø³Ø§Ù…Ø§Ù†Øª
## Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬

**Ù†Ø³Ø®Ù‡:** 1.0  
**ØªØ§Ø±ÛŒØ®:** 1404/10/15  
**Ù‡Ø¯Ù:** Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø± Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬ Ø¯Ø± ØªÙˆØ³Ø¹Ù‡

---

## ğŸš¨ **Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬ Ùˆ Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§**

### **1. Ù…Ø´Ú©Ù„ Theme Management:**

#### **ğŸ” Ø¹Ù„Ø§Ø¦Ù…:**
- Ø­Ø§Ù„Øª Ø´Ø¨/Ø±ÙˆØ² Ø§Ø² localStorage Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
- ØªÙ… Ù‡Ù†Ú¯Ø§Ù… Ø±ÙØ±Ø´ ØµÙØ­Ù‡ Ø±ÛŒØ³Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø®Ø·Ø§ÛŒ `Cannot redeclare function toggleTheme()`

#### **âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:**
```javascript
// âŒ NEVER DO - Don't create local theme functions
function toggleTheme() {
    // This conflicts with theme-system.js
}

// âœ… ALWAYS DO - Use central theme system
// Theme system handled by theme-system.js - no local override needed
```

#### **ğŸ”§ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø±ÙØ¹ Ù…Ø´Ú©Ù„:**
- [ ] Ø­Ø°Ù ØªÙˆØ§Ø¨Ø¹ `toggleTheme()` Ù…Ø­Ù„ÛŒ Ø§Ø² views
- [ ] Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² localStorage key `samanat_theme` ÙÙ‚Ø·
- [ ] Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ `theme-system.js` Ø¯Ø± `<head>`
- [ ] Ø­Ø°Ù Ú©Ø¯ theme management Ù…Ø¶Ø§Ø¹Ù

---

### **2. Ù…Ø´Ú©Ù„ Function Redeclaration:**

#### **ğŸ” Ø¹Ù„Ø§Ø¦Ù…:**
- Ø®Ø·Ø§ÛŒ `Fatal error: Cannot redeclare function`
- ØªØ¯Ø§Ø®Ù„ ØªÙˆØ§Ø¨Ø¹ Ø¨ÛŒÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù

#### **âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:**
```php
// âŒ NEVER DO - Don't redefine functions in views
function getStatusColor($status) {
    // This function already exists in Utilities.php
}

// âœ… ALWAYS DO - Use existing helper functions
// Functions loaded from app/helpers/Utilities.php
```

#### **ğŸ”§ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø±ÙØ¹ Ù…Ø´Ú©Ù„:**
- [ ] Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ØªØ§Ø¨Ø¹ Ø¯Ø± `app/helpers/Utilities.php`
- [ ] Ø­Ø°Ù ØªØ¹Ø±ÛŒÙ Ù…Ø¶Ø§Ø¹Ù Ø§Ø² views
- [ ] Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ helper files Ø¯Ø± `index.php`

---

### **3. Ù…Ø´Ú©Ù„ CSS Variables:**

#### **ğŸ” Ø¹Ù„Ø§Ø¦Ù…:**
- Ø±Ù†Ú¯â€ŒÙ‡Ø§ ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯ Ø¨ÛŒÙ† ØµÙØ­Ø§Øª
- ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ Ù…ØªÙØ§ÙˆØª Ù‡Ø³ØªÙ†Ø¯
- Dark mode Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯

#### **âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:**
```css
/* âœ… ALWAYS include these variables in every page CSS */
:root {
    --primary: #5E3AEE;
    --gray-50: #FAFAFA;
    --gray-100: #F4F4F5;
    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Vazirmatn', sans-serif;
}

[data-theme="dark"] {
    --gray-50: #18181B;
    --gray-100: #27272A;
}
```

#### **ğŸ”§ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø±ÙØ¹ Ù…Ø´Ú©Ù„:**
- [ ] Ú©Ù¾ÛŒ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ CSS Ø§Ø² `dashboard.css`
- [ ] Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ÙˆØ¬ÙˆØ¯ dark mode variables
- [ ] Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² `var(--variable-name)` Ø¯Ø± Ù‡Ù…Ù‡ Ø¬Ø§

---

### **4. Ù…Ø´Ú©Ù„ Database Model:**

#### **ğŸ” Ø¹Ù„Ø§Ø¦Ù…:**
- Ø®Ø·Ø§ÛŒ `Undefined constant REQUEST_PRIORITIES`
- `Call to undefined method`

#### **âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:**
```php
// âŒ WRONG - Missing self::
$request['priority_label'] = REQUEST_PRIORITIES[$request['priority']];

// âœ… CORRECT - Use self:: for class constants
$request['priority_label'] = self::REQUEST_PRIORITIES[$request['priority']];
```

#### **ğŸ”§ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø±ÙØ¹ Ù…Ø´Ú©Ù„:**
- [ ] Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² `self::` Ø¨Ø±Ø§ÛŒ Ø«Ø§Ø¨Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³
- [ ] Ø¨Ø±Ø±Ø³ÛŒ ØªØ¹Ø±ÛŒÙ Ù…ØªØ¯Ù‡Ø§ Ø¯Ø± model
- [ ] Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ÙˆØ¬ÙˆØ¯ Ø«Ø§Ø¨Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²

---

### **5. Ù…Ø´Ú©Ù„ Responsive Design:**

#### **ğŸ” Ø¹Ù„Ø§Ø¦Ù…:**
- ØµÙØ­Ù‡ Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø´Ú©Ø³ØªÙ‡ Ø§Ø³Øª
- Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ Ù‚Ø§Ø¨Ù„ Ø®ÙˆØ§Ù†Ø¯Ù† Ù†ÛŒØ³ØªÙ†Ø¯
- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ú©ÙˆÚ†Ú© Ù‡Ø³ØªÙ†Ø¯

#### **âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:**
```css
/* âœ… ALWAYS include mobile breakpoints */
@media (max-width: 767px) {
    .data-table {
        display: none;
    }
    
    .mobile-list {
        display: block;
    }
    
    .stats-row {
        grid-template-columns: repeat(2, 1fr);
    }
}
```

#### **ğŸ”§ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø±ÙØ¹ Ù…Ø´Ú©Ù„:**
- [ ] ØªØ³Øª Ø¯Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØµÙØ­Ù‡
- [ ] Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ÙˆØ¬ÙˆØ¯ mobile list Ø¨Ø±Ø§ÛŒ Ø¬Ø¯Ø§ÙˆÙ„
- [ ] Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø­Ø¯Ø§Ù‚Ù„ 45px Ø§Ø±ØªÙØ§Ø¹ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯

---

## ğŸ” **Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§ÛŒØ§Ø¨ÛŒ**

### **1. Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø®Ø·Ø§ÛŒØ§Ø¨ÛŒ:**
1. **Ø¨Ø±Ø±Ø³ÛŒ Console**: `F12 > Console` Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript
2. **Ø¨Ø±Ø±Ø³ÛŒ Network**: Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ AJAX
3. **Ø¨Ø±Ø±Ø³ÛŒ localStorage**: `Application > Local Storage`
4. **Ø¨Ø±Ø±Ø³ÛŒ CSS**: `Elements > Styles`

### **2. Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙÛŒØ¯:**
```javascript
// Debug theme system
console.log('Current theme:', document.documentElement.getAttribute('data-theme'));
console.log('Saved theme:', localStorage.getItem('samanat_theme'));

// Debug CSS variables
const computedStyle = getComputedStyle(document.documentElement);
console.log('Primary color:', computedStyle.getPropertyValue('--primary'));
```

### **3. ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹:**
```bash
# Test PHP syntax
php -l app/views/requests/list.php

# Test file permissions
ls -la assets/css/requests-page.css

# Test Apache errors
tail -f /var/log/apache2/error.log
```

---

## ğŸ“‹ **Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ù¾ÛŒØ´ Ø§Ø² Deploy**

### **âœ… Theme System:**
- [ ] ÙÙ‚Ø· ÛŒÚ© `toggleTheme()` Ø¯Ø± Ú©Ù„ Ù¾Ø±ÙˆÚ˜Ù‡
- [ ] localStorage key `samanat_theme` ÛŒÚ©Ø³Ø§Ù† Ù‡Ù…Ù‡ Ø¬Ø§
- [ ] `theme-system.js` Ø¯Ø± `<head>` Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡
- [ ] ØªØ³Øª theme persistence Ø¯Ø± Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª

### **âœ… CSS Consistency:**
- [ ] Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ CSS ÛŒÚ©Ø³Ø§Ù† Ø¯Ø± Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
- [ ] ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ ÛŒÚ©Ø³Ø§Ù† (`--font-sans`)
- [ ] Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ù…Ø·Ø§Ø¨Ù‚ `dashboard.css`
- [ ] Dark mode Ú©Ø§Ù…Ù„

### **âœ… JavaScript:**
- [ ] Ø¨Ø¯ÙˆÙ† Ø®Ø·Ø§ Ø¯Ø± Console
- [ ] Event listeners ØµØ­ÛŒØ­
- [ ] AJAX calls Ø¨Ø§ CSRF token
- [ ] Error handling Ù…Ù†Ø§Ø³Ø¨

### **âœ… PHP:**
- [ ] Ø¨Ø¯ÙˆÙ† Parse Error
- [ ] Helper functions Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡
- [ ] Model constants Ø¨Ø§ `self::`
- [ ] Exception handling

### **âœ… Responsive:**
- [ ] ØªØ³Øª Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ (< 768px)
- [ ] ØªØ³Øª Ø¯Ø± ØªØ¨Ù„Øª (768px - 1024px)
- [ ] ØªØ³Øª Ø¯Ø± Ø¯Ø³Ú©ØªØ§Ù¾ (> 1024px)
- [ ] Mobile list Ø¨Ø±Ø§ÛŒ Ø¬Ø¯Ø§ÙˆÙ„

---

## ğŸš€ **Ù†Ú©Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ**

### **1. Performance:**
- CSS variables Ø¨Ù‡ Ø¬Ø§ÛŒ hardcoded values
- Lazy loading Ø¨Ø±Ø§ÛŒ ØªØµØ§ÙˆÛŒØ±
- Minify CSS/JS Ø¯Ø± production

### **2. Accessibility:**
- `title` attribute Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
- `aria-label` Ø¨Ø±Ø§ÛŒ navigation
- Contrast ratio Ù…Ù†Ø§Ø³Ø¨

### **3. SEO:**
- Meta tags Ù…Ù†Ø§Ø³Ø¨
- Semantic HTML
- Alt text Ø¨Ø±Ø§ÛŒ ØªØµØ§ÙˆÛŒØ±

---

**ğŸ¯ Ù‡Ø¯Ù:** Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø± Ù…Ø´Ú©Ù„Ø§Øª Ùˆ ØªØ³Ø±ÛŒØ¹ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø®Ø·Ø§ÛŒØ§Ø¨ÛŒ  
**ğŸ“ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:** Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø¬Ø¯ÛŒØ¯ÛŒ Ø­Ù„ Ø´Ø¯ØŒ Ø¨Ù‡ Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯
